# 六命占術 × MBTI 診断サイト 要件定義（ラフ版）

本書は「短期キャッシュ回収」を最優先とする。  
本書にない機能は実装しない／本書に反する変更は失敗要因とする。

## 1. プロダクト概要

- 六命占術（12分類）× MBTI（16分類）を合成した診断型Webアプリ
- 結果は「無料結果」と「有料結果」に分離
- 有料は単発課金のみ：**¥980（税込）**（プラン追加禁止）
- 流入元は Threads のみ（SEO/会員/コミュニティ等は非目的）

## 2. 期間・目標

- 運用期間：年末〜正月（最大45日）
- 売上目標：¥500,000
- 運用工数：最小（放置可能／改善はコピー差し替えのみ）

## 3. 画面構成（固定・5画面）

画面数は必ず5。追加禁止。

### 3.1 ルーティング（固定）

- `/`（LP）
- `/start`（入力）
- `/result/free`（無料結果）
- `/pay`（決済）
- `/result/paid`（有料結果）

### 3.2 遷移（固定）

`/ → /start → /result/free → /pay → /result/paid`

## 4. UI/UX 方針（思想）

- Threads：感情点火・自己投影（売らない）
- サイト：即断・不安の言語化・回収（説明しない）
- モバイル最優先 / 装飾最小 / 体感1秒台
- 「親切設計化」禁止（説明増量、画面追加、迷いを増やす導線はNG）

## 5. 入力仕様（固定）

- 生年月日（必須 / `YYYY-MM-DD`）
- MBTI（16択・必須）
- 「わからない」選択肢は禁止
- 1画面完結・スクロールなし
- 入力値はブラウザ内保持（サーバ保存しない）

## 6. 六命占術 算出仕様（固定方針：正確性より一貫性）

### 6.1 入力

- `birthdate`: `YYYY-MM-DD`

### 6.2 出力

- `rokumei_id`: `1..12`
- `rokumei_name`: `string`

### 6.3 算出ルール（確定）

- 一貫性を最優先し、占術としての正確性は非目的
- 実装は以下の決定論的ルールで固定（流派差は免責で回避）
- 基準日：`1900-01-01`
- `days = (birthdate - 1900-01-01).days`
 - `rokumei_id = (days mod 12) + 1`
 - `rokumei_name` は `rokumei_id` に対応する名称テーブルから取得
 - 初期名称：`["金星人＋", "金星人－", "木星人＋", "木星人－", "水星人＋", "水星人－", "火星人＋", "火星人－", "土星人＋", "土星人－", "天王星人＋", "天王星人－"]`（後日差し替え可、ロジックは不変）

## 7. 結果表示仕様（最重要）

### 7.1 無料結果（KPI：決済画面遷移率）

表示順序は固定。入れ替え禁止。

1. タイプ表示（六命占術 × MBTI）
2. 年末総括（責任免除型の断定）
3. 失敗パターン（2〜3）
4. 不安の言語化（1文）
5. CTA（課金）：「回避方法を見る（¥980）」

無料結果テンプレ（基準文）は要件定義書に従う。

### 7.2 決済画面

- 単一プランのみ：¥980（税込）
- 表示要素（最大3点）
  - 回避行動
  - 注意月
  - 相性が難しいタイプ
- 禁止：割引、カウントダウン、複数価格、長文説明

### 7.3 有料結果（目的：満足→クレーム防止）

表示内容（固定）

- 回避行動（3点）
- 注意月（1〜3ヶ月）
- 相性が難しいタイプ（2〜3）
- 救済文（必須）：
  - 「あなたが悪いのではなく、今年は『やり方が合っていなかった』だけです。」

## 8. コンテンツ設計（192パターン）

- 六命占術レイヤー：12
- MBTIレイヤー：16
- 合成：192パターン

### 8.1 管理方式（確定）

- Git 管理の JSON で保持
- 文言差し替えのみで改善できる（理想：再デプロイ不要。ただし現実的にはデプロイ伴っても可）
- 生成は禁止（当日運用で自動生成しない）

### 8.2 JSON スキーマ（案：固定キー）

- `content/{rokumei_id}/{mbti}.json` のように分割 or 単一 `content.json`
- どちらでも良いが実装は一方に固定

必須フィールド

- `free`:
  - `year_summary`: `string`
  - `failure_patterns`: `string[]`（2〜3）
  - `anxiety_line`: `string`（1文）
  - `cta_text`: `"回避方法を見る（¥980）"`（固定推奨）
- `paid`:
  - `avoidance_actions`: `string[]`（3）
  - `caution_months`: `string[]`（1〜3）
- `difficult_types`: `string[]`（2〜3, 表示名は「六命占術×MBTI」形式）
  - `relief_text`: `string`（救済文）

## 9. 決済・セキュリティ（確定）

- 決済：Stripe Checkout
- 有料結果表示：Webhook 検証（後者）で購入済みのみ表示
- 個人情報保存しない
- 生年月日はサーバ保存しない
- 返金・クレームを避けるため、免責と救済文を必須配置

## 10. 計測（最低限 / GA4 確定）

GA4 に以下イベントを送信：

- `lp_view`
- `start_click`
- `input_submit`
